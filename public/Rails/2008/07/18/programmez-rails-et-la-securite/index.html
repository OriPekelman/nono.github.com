
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7 ie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8 ie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9 ie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Rails et la sécurité</title>
	<meta name="author" content="Bruno Michel">
	<link href='/assets/themes/the-minimum/css/style.css' rel="stylesheet" media="all">
	<link href="/atom.xml" rel="alternate" title="Rails et la sécurité" type="application/atom+xml">
    <script src="/assets/themes/the-minimum/modernizr.min.js"></script>
</head>
<body>

<div id="page" class="hentry">
	<header class="the-header">
		<div class="unit-head">
			<div class="unit-inner unit-head-inner">
				<p class="logo"><a href="/">M'enfin ?!?</a></p>
				<nav class="nav-global">
					<ul>
						<li class="archive"><a href="/archive.html">archive</a></li>
						<li class="category"><a href="/categories.html">catégories</a></li>
					</ul>
				</nav>
			</div><!-- unit-inner -->
		</div><!-- unit-head -->
	</header>
	<div class="body" role="main">
		<div class="unit-body">
			<div class="unit-inner unit-body-inner">
				<div class="entry-content">
					
<article class="unit-article layout-post">
	<div class="unit-inner unit-article-inner">
		<div class="content">
			<header>
				<div class="unit-head">
					<div class="unit-inner unit-head-inner">
						<h1 class="h2 entry-title">Rails et la sécurité</h1>
					</div><!-- unit-inner -->
				</div><!-- unit-head -->
			</header>

			<div class="bd">
				<div class="entry-content">
					<h2 id="toc_20">Introduction</h2>

<p>La sécurité des applications web est souvent un sujet délicat : peu de temps à y consacrer, mais cela peut avoir des conséquences assez graves.
Pas de panique&nbsp;!
<a href="http://rubyonrails.com">Ruby on Rails</a> est bien armé et avec un peu de rigueur, on peut se protéger sans trop de difficultés.
Nous allons voir les principaux types d'attaques et comment les éviter.</p>

<h2 id="toc_21">Injections SQL</h2>

<p>Commençons par un grand classique : <a href="http://fr.wikipedia.org/wiki/Injection_SQL">les injections SQL</a>.
Une injection SQL consiste simplement à envoyer des données non prévues dans une requête SQL.
Prenons comme exemple une application web où les utilisateurs sont authentifiés de la manière suivante :</p>
<div class="highlight"><pre><code class="ruby"><span class="vi">@current_user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="ss">:first</span><span class="p">,</span> <span class="ss">:conditions</span> <span class="o">=&gt;</span> <span class="s2">&quot;login=&#39;</span><span class="si">#{</span><span class="n">params</span><span class="o">[</span><span class="ss">:login</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; AND password=&#39;</span><span class="si">#{</span><span class="n">params</span><span class="o">[</span><span class="ss">:password</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</code></pre>
</div>

<p>En temps normal, quand Joe s'authentifie, la requête SQL suivante est exécutée :</p>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">users</span> <span class="k">WHERE</span> <span class="n">login</span><span class="o">=</span><span class="s1">&#39;Joe&#39;</span> <span class="k">AND</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;0521bc575b0ff61daa62494c7ae9c5b6&#39;</span> <span class="k">LIMIT</span> <span class="mi">1</span><span class="p">;</span>
</code></pre>
</div>

<p>Mais supposons maintenant que Kevin, un Script Kiddie, passe dans le coin et décide de mettre <code>&quot;Joe&#39;; --&quot;</code> dans le champ login.
La requête SQL va alors ressembler à :</p>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">users</span> <span class="k">WHERE</span> <span class="n">login</span><span class="o">=</span><span class="s1">&#39;Joe&#39;</span><span class="p">;</span> <span class="c1">--&#39; AND password=&#39;00000000000000000000000000000000&#39; LIMIT 1;</span>
</code></pre>
</div>

<p>Kevin a réussi à se faire passer pour Joe sans connaître son mot de passe&nbsp;!</p>

<p>Heureusement, Active Record permet de <a href="http://manuals.rubyonrails.com/read/chapter/43">nous en protéger assez facilement</a>.
Pour cela, il suffit d'utiliser les formes échappées comme cela :</p>
<div class="highlight"><pre><code class="ruby"><span class="vi">@current_user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="ss">:first</span><span class="p">,</span> <span class="ss">:conditions</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s2">&quot;login=? AND password=?&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">[</span><span class="ss">:login</span><span class="p">),</span> <span class="n">params</span><span class="o">[</span><span class="ss">:password</span><span class="p">)))</span>
</code></pre>
</div>

<p>ou de façon équivalente :</p>
<div class="highlight"><pre><code class="ruby"><span class="vi">@current_user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="ss">:first</span><span class="p">,</span> <span class="ss">:conditions</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:login</span> <span class="o">=&gt;</span> <span class="n">params</span><span class="o">[</span><span class="ss">:login</span><span class="p">),</span> <span class="ss">:password</span> <span class="o">=&gt;</span> <span class="n">params</span><span class="o">[</span><span class="ss">:password</span><span class="p">)})</span>
</code></pre>
</div>

<p>Dans les 2 cas, Active Record rajoutera un caractère <code>&#39;\&#39;</code> devant chaque apostrophe de façon à éviter les injections SQL.</p>

<h2 id="toc_22">L'authentification et la gestion des droits</h2>

<p>Pour la grande majorité des projets, l'authentification (et la gestion des droits qui vont avec) est un passage obligé.
Pour cela, il existe un certain nombre de points importants à respecter comme le chiffrement des mots de passe stockés en base de données
(ce que nous n'avons pas fait dans l'exemple précédent).
Les erreurs sont vite arrivées, aussi je vous recommande d'utiliser des plugins reconnus comme <a href="http://agilewebdevelopment.com/plugins/restful_authentication">Restful Authentication</a>, <a href="http://agilewebdevelopment.com/plugins/openidauthentication">OpenID Authentication</a> et <a href="http://www.writertopia.com/developers/authorization">Authorization</a>.</p>

<p>Il ne vous reste plus qu'à faire attention à un dernier détail : mettre en cache des pages nécessitant une authentification est une mauvaise idée.
En effet, ces pages vont alors être servies par le serveur web sans passer Rails, et donc sans vérification de l'authentification.</p>

<h2 id="toc_23">Se protéger des données forgées</h2>

<p>L'étape suivante consiste à bien sécuriser l'accès aux données, aussi bien en lecture qu'en écriture.
En effet, Rails possède quelques raccourcis très pratiques, mais qui peuvent poser problème quand ils sont mal maîtrisés.
Le plus courant est <a href="http://manuals.rubyonrails.com/read/chapter/47">l'affectation de masse</a>, technique qui consiste à créer un objet Active Record directement depuis les paramètres de la requête HTTP.
Par exemple, la création d'un compte utilisateur pourra s'effectuer de la façon suivante :</p>
<div class="highlight"><pre><code class="ruby"><span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:user</span><span class="p">))</span>
</code></pre>
</div>

<p>Supposons maintenant que la table <code>&#39;users&#39;</code> comporte un champ <code>&#39;admin&#39;</code> qui vaut <code>0</code> par défaut ou <code>1</code> pour les super-utilisateurs.
Un utilisateur malveillant pourrait forger la requête HTTP pour ajouter un paramètre <code>user[admin)=1</code> afin de gagner les pouvoirs réservés aux admins.
La première solution pour se protéger de cette attaque consiste à écrire explicitement quels sont les paramètres autorisés :</p>
<div class="highlight"><pre><code class="ruby"><span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="ss">:login</span> <span class="o">=&gt;</span> <span class="n">params</span><span class="o">[</span><span class="ss">:user</span><span class="p">)</span><span class="o">[</span><span class="ss">:login</span><span class="p">),</span>
    <span class="ss">:email</span> <span class="o">=&gt;</span> <span class="n">params</span><span class="o">[</span><span class="ss">:user</span><span class="p">)</span><span class="o">[</span><span class="ss">:email</span><span class="p">),</span>
    <span class="ss">:password</span> <span class="o">=&gt;</span> <span class="n">params</span><span class="o">[</span><span class="ss">:user</span><span class="p">)</span><span class="o">[</span><span class="ss">:password</span><span class="p">),</span>
    <span class="ss">:cgu</span> <span class="o">=&gt;</span> <span class="n">params</span><span class="o">[</span><span class="ss">:user</span><span class="p">)</span><span class="o">[</span><span class="ss">:cgu</span><span class="p">))</span>
</code></pre>
</div>

<p>Mais ceci peut vite devenir pénible quand on commence à avoir des formulaires un peu conséquents.
C'est pourquoi on lui préfère généralement la deuxième solution : la déclaration dans le modèle de la liste des attributs qui ne peuvent pas être modifiés.
Cette déclaration se fait à l'aide de la méthode <strong><code>attr_protected</code></strong> comme suit :</p>
<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
    <span class="n">attr_protected</span> <span class="ss">:admin</span>
    <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Nous pouvons de nouveau utiliser l'affectation de masse sans craindre qu'un utilisateur se fasse passer pour un admin, Rails s'occupe de filtrer les paramètres.</p>

<p>Dans le même style, un attaquant peut essayer de <a href="http://www.therailsway.com/2007/3/26/association-proxies-are-your-friend">forger des URL</a>.
Si, par exemple, l'utilisateur authentifié peut supprimer l'item n°123 qui lui appartient, en appelant l'URL <code>/items/delete/123</code>, alors que se passera-t-il s'il appelle la même URL pour l'item n°456 qui ne lui appartient pas&nbsp;?
La réponse dépend du code de la méthode <code>delete</code>.
Une implémentation de base pourrait ressembler à :</p>
<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">ItemsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
    <span class="k">def</span> <span class="nf">delete</span>
        <span class="no">Item</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="p">))</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Pour se protéger des URL forgées, on pourrait la transformer en :</p>
<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">ItemsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
    <span class="k">def</span> <span class="nf">delete</span>
        <span class="vi">@item</span> <span class="o">=</span> <span class="vi">@current_user</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="p">))</span>
        <span class="vi">@item</span><span class="o">.</span><span class="n">delete</span> <span class="k">if</span> <span class="vi">@item</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Ce n'est pas parfait (on pourrait vérifier que c'est bien une requête de type POST), mais c'est déjà beaucoup mieux.</p>

<p>Un dernier petit truc pour la route avant de passer à autre chose.
Si vous avez une API pour laquelle vous utilisez la sérialisation XML, il peut être intéressant de surcharger <code>ActiveRecord#to_xml</code> pour que le champ <code>secret_field</code> n'y apparaisse pas :</p>
<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">Item</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
    <span class="k">def</span> <span class="nf">to_xml</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">{})</span>
        <span class="k">super</span><span class="p">({</span><span class="ss">:except</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:secret_field</span><span class="p">)}</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<h2 id="toc_24">Cross-Site Scripting</h2>

<p>Jusque maintenant, nous avons vu des attaques directes : un utilisateur essaye de s'en prendre à notre site.
Il existe également des attaques plus pernicieuses que l'on classe sous le nom de <a href="http://fr.wikipedia.org/wiki/Cross_site_scripting">Cross-Site Scripting</a> (XSS en abrégé).
Leur but est de s'en prendre aux utilisateurs de notre site en glissant des cochonneries sur notre site.
Ceci peut aller du spammeur qui mettra une balise <code>&lt;iframe&gt;</code> vers son site dans tous les formulaires qui lui passent sous la main à l'injection de javascript non maîtrisé.</p>

<p>Par exemple, quelqu'un crée un item dont la description est la suivante :</p>
<div class="highlight"><pre><code class="html"><span class="nt">&lt;script&gt;</span><span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="o">=</span><span class="s1">&#39;http://www.programmez.com/&#39;</span><span class="p">;</span><span class="nt">&lt;/script&gt;</span>
</code></pre>
</div>

<p>Si maintenant un visiteur affiche la description de cet item, il sera redirigé vers le site <a href="http://www.programmez.com">www.programmez.com</a>.
Vous vous dites que c'est ennuyeux mais pas bien méchant&nbsp;?
Oui, mais la même technique permet de voler les cookies et donc les sessions associées.
Nous allons donc chercher à nous protéger de ces failles XSS.</p>

<p>Pour cela, il est important de faire une distinction entre 2 cas : est-ce que le champ que vous allez afficher peut contenir des balises HTML ou non&nbsp;?
Pour afficher le nom d'un item, on sera dans le premier cas, à savoir pas de balises HTML : on veut juste afficher le nom tel que l'a rentré son propriétaire.
Par contre, on peut souhaiter être plus souple pour la description de l'item et laisser la possibilité d'avoir un titre (balise <code>&lt;h1&gt;</code>), du gras (<code>&lt;b&gt;</code>) ou de l'italique (<code>&lt;i&gt;</code>).
Ces 2 cas ne se traitent pas de la même façon.
Pour le premier cas, Rails nous offre un moyen simple de nous en protéger : le helper <strong><code>h</code></strong>.
En pratique, à chaque fois que l'on souhaitera afficher le titre d'un item, on procédera de la manière suivante :</p>
<div class="highlight"><pre><code class="text">&lt;%=h @item.title %&gt;
</code></pre>
</div>

<p>Ce <code>h</code> va convertir les caractères qui pourraient être interprétés par un navigateur web en l'entité HTML correspondante. Problème résolu.</p>

<p>Le deuxième cas est par contre plus difficile à traiter.
Vous pouvez être tenté d'utiliser un moteur de formatage de texte comme <a href="http://whytheluckystiff.net/ruby/redcloth/">RedCloth</a>.
Attention, cela ne suffit pas à filtrer <a href="http://www.rorsecurity.info/2007/08/20/redcloth-security-thoughts/">toutes les attaques</a>&nbsp;!
Pour votre tranquillité, il vaut mieux utiliser le plugin <a href="http://svn.techno-weenie.net/projects/plugins/white_list/">WhiteList</a>.
Depuis Rails 2.0, ce plugin fait partie du framework et peut s'utiliser de la façon suivante :</p>
<div class="highlight"><pre><code class="text">&lt;%= sanitize @item.description, :tags =&gt; %w(b i h1) %&gt;
</code></pre>
</div>

<p>Il est possible de déclarer les balises autorisées de manière globale : je vous renvoie à la <a href="http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#M000936">documentation officielle</a>.
Et pour ceux qui veulent être sûrs de ne pas oublier d'appel à <code>h</code> ou à <code>sanitize</code>, il existe des moteurs de template alternatifs comme <a href="http://wiki.rubyonrails.com/rails/pages/Safe+ERB">Safe ERB</a> ou <a href="http://www.kuwata-lab.com/erubis/">Erubis</a>.
Ces moteurs adoptent l'approche opposée :
ils filtrent par défaut tous les éléments <code>&lt;%= %&gt;</code>, charge au développeur d'indiquer explicitement ceux pour lequel le moteur ne fera pas de filtrage.</p>

<h2 id="toc_25">Cross-Site Request Forgeries</h2>

<p>Juste avant de finir, je voudrais juste dire un mot sur un dernier type d'attaques.
Les CSRF, abréviation de Cross-Site Request Forgery, sont des attaques complexes qui visent à forcer l'utilisateur à envoyer une requête HTTP vers notre site lorsque celui-ci visitera le site de l'attaquant.
Je vous renvoie à <a href="http://fr.wikipedia.org/wiki/Cross-Site_Request_Forgeries">wikipedia</a> si vous voulez comprendre comment fonctionne ce type d'attaques.
Sachez que Rails vous protège de celles-ci depuis la version 2.0 et qu'il existe un plugin pour les versions plus anciennes : <a href="http://svn.techno-weenie.net/projects/plugins/csrf_killer/">CSRF-killer</a>.</p>

<h2 id="toc_26">Conclusion</h2>

<p>Nous avons pu voir qu'en prenant quelques bonnes habitudes, on pouvait développer des applications sûres en Rails.
Il reste cependant des sujets que je n'ai pas abordés comme <a href="http://www.igvita.com/blog/2006/10/10/securing-your-rails-environment/">l'administration de Rails</a>, <a href="http://www.rorsecurity.info/2007/03/15/apache-2-file-privileges-and-modules/">apache</a> ou <a href="http://www.rorsecurity.info/2007/02/25/securing-mysql/">MySQL</a> (<a href="http://www.rorsecurity.info/2007/02/27/rails%e2%80%99-friends-securing-mysql-continued/">suite</a>), <a href="http://www.rorsecurity.info/2007/03/27/working-with-files-in-rails/">la manipulation des fichiers</a> ou encore <a href="http://railscasts.com/episodes/9">le filtrage des informations sensibles dans les logs</a>.
Il est également important de se tenir au courant des mises à jour de sécurité de Rails et des plugins que vous utilisez.</p>

<p>Je remercie Benoît Sibaud pour sa relecture attentive.</p>

<h2 id="toc_27">Références</h2>

<p><a href="http://www.rorsecurity.info/ruby-on-rails-security-cheatsheet/">http://www.rorsecurity.info/ruby-on-rails-security-cheatsheet/</a>
<a href="http://www.quarkruby.com/2007/9/20/ruby-on-rails-security-guide">http://www.quarkruby.com/2007/9/20/ruby-on-rails-security-guide</a>
<a href="http://blog.innerewut.de/2008/1/3/24c3-ruby-on-rails-security">http://blog.innerewut.de/2008/1/3/24c3-ruby-on-rails-security</a>
<a href="http://www.owasp.org/index.php/OWASP_AppSec_FAQ">http://www.owasp.org/index.php/OWASP_AppSec_FAQ</a>
<a href="http://www.owasp.org/index.php/Top_10_2007">http://www.owasp.org/index.php/Top_10_2007</a></p>

					<div class="meta">
						<p class="date-publish">
							Publié le  
							<date class="date-pub" title="2008-07-18T00:00:00+02:00" datetime="2008-07-18T00:00:00+02:00" pubdate>
                                <span class="day">
                                    18
                                </span>/<span class="month">
                                    07
                                </span>/<span class="year">
                                    2008
                                </span>
							</date>
						</p>
						<ul class="list-category list-linear">
							<li class="list-head">Catégorie : </li>
							
							


  
     
    	<li><a href="/categories.html#Rails-ref">
    		Rails <span>9</span>
    	</a></li>
    
  


						</ul>
					</div><!-- meta -->
				</div><!-- entry-content -->
				<div class="misc-content">
					


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'menfin'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




				</div><!-- misc-content -->
				
			</div><!-- bd -->
			<footer class="unit-foot">
				<div class="unit-inner unit-foot-inner">
					<nav class="pagination">
						<ul>
							
							<li class="prev"><a class="internal" rel="prev"  href="/LinuxFr/2008/06/28/linuxfr-a-10-ans-soiree-fx3-et-autres-joyeusetes" title="View LinuxFR.org a dix ans, soirée Firefox 3 et autres joyeusetés">&laquo; LinuxFR.org a dix ans, soirée Firefox 3 et autres joyeusetés</a></li>
							
							
							<li class="pipe"> | </li>
							
							
							<li class="next"><a class="internal" rel="next"  href="/Astuces/2008/08/18/firefox-et-about-config" title="View Firefox et about:config">Firefox et about:config &raquo;</a></li>
							
						</ul>
					</nav>
					<p class="gotop">
						<a href="#page">Back to Top</a>
					</p>
				</div>
			</footer>

		</div><!-- content -->
	</div><!-- unit-inner -->
</article>


				</div>
			</div><!-- unit-inner -->
		</div><!-- unit-body -->
	</div><!-- body -->
	<footer class="the-footer">
		<div class="unit-foot">
			<div class="unit-inner unit-foot-inner">
				<div class="misc vcard">
					<img src="/public/bruno.png" alt="" class="avatar" />
					<h4>À propos</h4>
					<ul>
						<li class="contact"><address><span class="author fn n">Bruno Michel</span> - <span class="fn email">bmichel AT menfin DOT info</span></address></li>
						<li class="github"><a href="http://github.com/nono/" rel="me">github.com/nono</a></li>
						<li class="twitter"><a href="http://twitter.com/brmichel/" rel="me">twitter.com/brmichel</a></li>
						<li class="rss"><a href="/atom.xml">Subscribe to ATOM feed</a></li>
					</ul>
				</div><!-- misc -->
				<p class="licence">
                    ♡2006 by Bruno Michel. Copying is an act of love. Please copy and share.
				</p>
			</div><!-- unit-foot-inner -->
		</div><!-- unit-foot -->
	</footer>
</div><!-- page -->
<script>
/*! A fix for the iOS orientationchange zoom bug.Script by @scottjehl, rebound by @wilto. MIT License.*/
(function(j){var i=j.document;if(!i.querySelectorAll){return}var l=i.querySelectorAll("meta[name=viewport]")[0],a=l&&l.getAttribute("content"),h=a+", maximum-scale=1.0",d=a+", maximum-scale=10.0",g=true,c=j.orientation,k=0;if(!l){return}function f(){l.setAttribute("content",d);g=true}function b(){l.setAttribute("content",h);g=false}function e(m){c=Math.abs(j.orientation);k=Math.abs(m.gamma);if(k>8&&c===0){if(g){b()}}else{if(!g){f()}}}j.addEventListener("orientationchange",f,false);j.addEventListener("deviceorientation",e,false)})(this);
</script>

  
</body>
</html>

