
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7 ie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8 ie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9 ie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Afficher la branche Git courante dans le prompt de ZSH</title>
	<meta name="author" content="Bruno Michel">
	<link href='/assets/themes/the-minimum/css/style.css' rel="stylesheet" media="all">
	<link href="/atom.xml" rel="alternate" title="Afficher la branche Git courante dans le prompt de ZSH" type="application/atom+xml">
    <script src="/assets/themes/the-minimum/modernizr.min.js"></script>
</head>
<body>

<div id="page" class="hentry">
	<header class="the-header">
		<div class="unit-head">
			<div class="unit-inner unit-head-inner">
				<p class="logo"><a href="/">M'enfin ?!?</a></p>
				<nav class="nav-global">
					<ul>
						<li class="archive"><a href="/archive.html">archive</a></li>
						<li class="category"><a href="/categories.html">catégories</a></li>
					</ul>
				</nav>
			</div><!-- unit-inner -->
		</div><!-- unit-head -->
	</header>
	<div class="body" role="main">
		<div class="unit-body">
			<div class="unit-inner unit-body-inner">
				<div class="entry-content">
					
<article class="unit-article layout-post">
	<div class="unit-inner unit-article-inner">
		<div class="content">
			<header>
				<div class="unit-head">
					<div class="unit-inner unit-head-inner">
						<h1 class="h2 entry-title">Afficher la branche Git courante dans le prompt de ZSH</h1>
					</div><!-- unit-inner -->
				</div><!-- unit-head -->
			</header>

			<div class="bd">
				<div class="entry-content">
					<p>Je suis tombé sur un tips bien sympa :
<a href="http://www.simplisticcomplexity.com/2008/03/13/show-your-git-branch-name-in-your-prompt/">Show Your GIT Branch Name In Your Prompt</a>.
Il y est expliqué comment avoir la branche <a href="http://git.or.cz/">Git</a> en cours dans son prompt avec <a href="http://www.gnu.org/software/bash/">Bash</a>.</p>

<p>J'ai adapaté ca pour <a href="http://www.zsh.org/">zsh</a>. Voici un extrait de mon <code>zshrc</code> :</p>
<div class="highlight"><pre><code class="text">export PS1=&#39;%~ $(git_branch)%# &#39;

function git_branch {
  git branch --no-color 2&gt; /dev/null | sed -e &#39;/^[^*]/d&#39; -e &#39;s/* \(.*\)/(\1) /&#39;
}

setopt PROMPT_SUBST
</code></pre>
</div>

<p>La seule difficulté fût de se rendre compte qu'il fallait activer une option pour que ca marche, et de savoir quelle était cette option (<code>PROMPT_SUBST</code> en l'occurence).</p>

<p>Ainsi que je suis sous un répertoire normal, j'ai un prompt de la forme <code>~/Desktop %</code>, et quand je suis dans un répertoire versionné sous Git, ca donne : <code>~/mon_projet (ma_branche) %</code>.
Ce n'est pas grand chose, mais comme il paraît que c'est une bonne pratique de faire des branches sous Git, autant avoir en permance le nom de la branche courante sous les yeux.</p>

<p><strong>PS</strong> : j'ai des invitations pour <a href="https://github.com/">GitHub</a> si ca intéresse des gens.</p>

					<div class="meta">
						<p class="date-publish">
							Publié le  
							<date class="date-pub" title="2008-03-15T00:00:00+01:00" datetime="2008-03-15T00:00:00+01:00" pubdate>
                                <span class="day">
                                    15
                                </span>/<span class="month">
                                    03
                                </span>/<span class="year">
                                    2008
                                </span>
							</date>
						</p>
						<ul class="list-category list-linear">
							<li class="list-head">Catégorie : </li>
							
							


  
     
    	<li><a href="/categories.html#Git-ref">
    		Git <span>1</span>
    	</a></li>
    
  


						</ul>
					</div><!-- meta -->
				</div><!-- entry-content -->
				<div class="misc-content">
					


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'menfin'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




				</div><!-- misc-content -->
				
			</div><!-- bd -->
			<footer class="unit-foot">
				<div class="unit-inner unit-foot-inner">
					<nav class="pagination">
						<ul>
							
							<li class="prev"><a class="internal" rel="prev"  href="/Divers/2008/02/12/Portrait-of-a-noob" title="View Portrait of a N00b">&laquo; Portrait of a N00b</a></li>
							
							
							<li class="pipe"> | </li>
							
							
							<li class="next"><a class="internal" rel="next"  href="/Ruby/2008/04/02/mon-article-dans-programmez" title="View Dossier Ruby on Rails dans programmez">Dossier Ruby on Rails dans programmez &raquo;</a></li>
							
						</ul>
					</nav>
					<p class="gotop">
						<a href="#page">Back to Top</a>
					</p>
				</div>
			</footer>

		</div><!-- content -->
	</div><!-- unit-inner -->
</article>


				</div>
			</div><!-- unit-inner -->
		</div><!-- unit-body -->
	</div><!-- body -->
	<footer class="the-footer">
		<div class="unit-foot">
			<div class="unit-inner unit-foot-inner">
				<div class="misc vcard">
					<img src="/public/bruno.png" alt="" class="avatar" />
					<h4>À propos</h4>
					<ul>
						<li class="contact"><address><span class="author fn n">Bruno Michel</span> - <span class="fn email">bmichel AT menfin DOT info</span></address></li>
						<li class="github"><a href="http://github.com/nono/" rel="me">github.com/nono</a></li>
						<li class="twitter"><a href="http://twitter.com/brmichel/" rel="me">twitter.com/brmichel</a></li>
						<li class="rss"><a href="/atom.xml">Subscribe to ATOM feed</a></li>
					</ul>
				</div><!-- misc -->
				<p class="licence">
                    ♡2006 by Bruno Michel. Copying is an act of love. Please copy and share.
				</p>
			</div><!-- unit-foot-inner -->
		</div><!-- unit-foot -->
	</footer>
</div><!-- page -->
<script>
/*! A fix for the iOS orientationchange zoom bug.Script by @scottjehl, rebound by @wilto. MIT License.*/
(function(j){var i=j.document;if(!i.querySelectorAll){return}var l=i.querySelectorAll("meta[name=viewport]")[0],a=l&&l.getAttribute("content"),h=a+", maximum-scale=1.0",d=a+", maximum-scale=10.0",g=true,c=j.orientation,k=0;if(!l){return}function f(){l.setAttribute("content",d);g=true}function b(){l.setAttribute("content",h);g=false}function e(m){c=Math.abs(j.orientation);k=Math.abs(m.gamma);if(k>8&&c===0){if(g){b()}}else{if(!g){f()}}}j.addEventListener("orientationchange",f,false);j.addEventListener("deviceorientation",e,false)})(this);
</script>

  
</body>
</html>

